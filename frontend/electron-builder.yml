# electron-builder configuration for online installer
# This replaces the build section in package.json

appId: com.rdo.mapoverlay
productName: RDO-Map-Overlay

directories:
  output: ../build/installer
  buildResources: build-resources

files:
  - "**/*"
  - "!node_modules/**/*"
  - "!build-resources"
  - "package.json"
  - "package-lock.json"

extraResources:
  - from: "../.build/backend-source"
    to: "backend"
    filter: ["**/*"]

# Compression for smaller packages
compression: maximum
asar: true
asarUnpack:
  - "**/*.node"

# Publishing configuration for auto-updater
publish:
  - provider: github
    owner: asd007
    repo: rdo-overlay
    releaseType: release

# Windows build configuration (no signing)
win:
  icon: icon.ico
  target:
    - target: nsis
      arch: [x64]

# NSIS Installer Configuration
nsis:
  oneClick: false
  perMachine: false
  allowToChangeInstallationDirectory: true
  allowElevation: true
  createDesktopShortcut: true
  createStartMenuShortcut: true
  shortcutName: RDO-Map-Overlay
  license: ../EULA.txt
  artifactName: ${productName}-Setup.${ext}
  unicode: true
  deleteAppDataOnUninstall: false
  # Custom GUID for consistent uninstaller
  guid: "a7c4d8e9-1234-5678-9abc-def012345678"